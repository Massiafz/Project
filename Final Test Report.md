# Test Documentation for BrightByte Music Cataloging Software

## 1. Unit Tests

| Test ID   | Method/Class                         | Input(s)                                                                                      | Expected Output(s)                                                        | Approach                                  | Team Member |
|-----------|--------------------------------------|-----------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|-------------------------------------------|-------------|
| UT-01-CB  | `AlbumCatalogApp.load_users()`       | No `users.json` file exists (simulate by deleting the file)                                   | Returns an empty dictionary `{}`                                          | Automated unit test using `unittest`      | Massi       |
| UT-02-CB  | `AlbumCatalogApp.load_users()`       | `users.json` contains invalid JSON (e.g., "invalid json")                                     | Returns an empty dictionary `{}` (gracefully handling the error)          | Automated unit test with error handling   | Massi       |
| UT-03-CB  | `AlbumCatalogApp.load_albums_from_csv()` | A valid CSV file with one album entry (e.g., album named "Test Album")                         | Returns a list with one album dictionary with `"Album"` field `"Test Album"` | Automated unit test validating CSV parsing | Massi       |
| UT-04-TB  | `LoginFrame.login()`                 | Valid username `"testuser"` and password `"pass123"` pre-populated in the users dictionary       | Sets `current_user` to `"testuser"` and shows a "Login Successful" outcome  | Automated test simulating user input      | Massi       |
| UT-05-TB  | `SignupFrame.signup()`               | Valid user info: username `"newuser"`, email `"new@example.com"`, password `"newpass"`, confirmation `"newpass"` | Adds `"newuser"` to the users dictionary                                  | Automated test simulating form submission | Massi       |

---

## 2. Integration Tests

| Test ID  | Components Involved              | Preconditions                                                                | Steps                                                                                                                                                                                       | Expected Result                                             | Team Member |
|----------|----------------------------------|------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|-------------|
| IT-01-TB | `CatalogFrame.add_album()`        | User is logged in (e.g., `"testuser"`) and a valid CSV file exists             | 1. Invoke `add_album()` to open the Toplevel window. <br> 2. Simulate user input: enter `"Artist Test"`, `"Album Test"`, `"2022-02-02"`, `"Rock"`. <br> 3. Patch file dialog to return an empty string. | A new album `"Album Test"` is appended to the album list.     | Massi       |

---

## 3. System Tests

| Test ID | Scenario                                                      | Preconditions                                                              | Steps                                                                                                                                                                                                                                                           | Expected Outcome                                                                                   | Team Member |
|---------|---------------------------------------------------------------|----------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|-------------|
| OB-07   | End-to-end workflow (Sign up, login, add album, search, logout) | No existing account for `"user1"`; valid CSV file present                   | 1. Sign up as `"user1"`. <br> 2. Switch to LoginFrame and log in as `"user1"`. <br> 3. In CatalogFrame, add an album with details: `"Artist1"`, `"Album1"`, `"2023-03-03"`, `"Jazz"`. <br> 4. Search for `"Album1"`. <br> 5. Logout.                | User `"user1"` is created, album is added and found, and logout is successful.                       | Massi       |
| OB-08   | Guest user workflow                                           | Valid CSV album file exists                                                 | 1. Use the "continue as guest" option from LoginFrame. <br> 2. In CatalogFrame, perform a search for `"Test Album"`.                                                                                                                                           | `current_user` is set to `"Guest"` and search returns matching albums; guest editing is disabled.    | Massi       |
| OB-09   | Search functionality with filters                             | Album list contains one album `"Test Album"` by `"Test Artist"`             | 1. Set search filter to `"Album Name"` and search for `"test album"`. <br> 2. Change filter to `"Artist Name"` and search for `"test artist"`.                                                                                                               | Search returns one matching result in each case.                                                  | Massi       |
| OB-10   | Editing user account details                                  | User `"edituser"` exists with password `"oldpass"`                          | 1. Open edit account from CatalogFrame. <br> 2. Enter current password `"oldpass"`, new username `"editeduser"`, and new password `"newpass"`.                                                                                                                 | Account is updated: username changes to `"editeduser"` and password is updated to `"newpass"`.         | Massi       |
| OB-11   | Logout functionality                                          | User `"testuser"` is logged in                                              | Invoke `logout()` from CatalogFrame.                                                                                                                                                                                                                           | `current_user` is reset to `None`, global `is_logged_in` is set to `False`, and the search bar is hidden. | Massi       |
| OB-12   | Editing album details                                           | Album list contains `"Old Album"`                                           | 1. Select `"Old Album"` in CatalogFrame. <br> 2. Open edit album and update details to: `"New Artist"`, `"New Album"`, `"2021-12-12"`, `"Jazz"`.                                                                                                          | Album details are updated in the album list.                                                      | Massi       |
| OB-13   | Deleting an album                                             | Album list contains `"Delete Album"`                                        | 1. Select `"Delete Album"` in CatalogFrame. <br> 2. Invoke `delete_album()` with force parameter.                                                                                                                                                             | `"Delete Album"` is removed from the album list.                                                  | Massi       |
| OB-14   | Viewing album tracklist                                         | Album list contains `"Tracks Album"` with tracklist `"Song1; Song2; Song3"`     | 1. Select `"Tracks Album"` in CatalogFrame. <br> 2. Invoke `tracks_album()` to open the tracklist window.                                                                                                                                                      | A new Toplevel window opens displaying the tracklist.                                              | Massi       |
| OB-15   | Search filtering by Release Date                              | Album list contains `"Release Date Album"` with release date `"2021-05-05"`     | 1. Set search filter to `"Release Date"`. <br> 2. Enter `"2021"` in the search bar and perform a search.                                                                                                                                                       | Search returns the album matching release year 2021.                                               | Massi       |
| OB-16   | Refreshing the catalog                                          | The search bar contains text                                                | Invoke `refresh_catalog()` to clear the search bar and update the display.                                                                                                                                                                                     | The search bar is cleared and the catalog is refreshed.                                             | Massi       |
| OB-17   | Search triggered by Enter key                                   | The search bar has text (e.g., `"Test"`)                                     | Simulate pressing Enter key by calling `on_enter_pressed()` with a fake event.                                                                                                                                                                                 | Search function is triggered and search results are updated.                                       | Massi       |
| OB-18   | Thread pool executor usage during catalog refresh               | Album list contains `"Threaded Album"`                                      | 1. Call `refresh_album_list()` in CatalogFrame. <br> 2. Count the number of thread tasks submitted.                                                                                                                                                            | Number of thread tasks equals the number of albums.                                               | Massi       |
| OB-19   | Edit account with invalid current password                      | User `"invaliduser"` exists with password `"correctpass"`                   | 1. Open edit account. <br> 2. Enter incorrect current password `"wrongpass"` and attempt update.                                                                                                                                                                | Error is displayed and password remains unchanged.                                               | Massi       |
| OB-20   | Sign up with an invalid email                                   | None                                                                        | Fill out sign-up form with email `"notanemail"` and submit.                                                                                                                                                                                                     | Error is displayed and user is not added.                                                          | Massi       |
| OB-21   | Sign up with mismatched passwords                               | None                                                                        | Fill out sign-up form with mismatched passwords and submit.                                                                                                                                                                                                     | Error is displayed and account is not created.                                                     | Massi       |
| OB-22   | Login failure with incorrect credentials                        | User `"userfail"` exists with password `"rightpass"`                        | Attempt login with username `"userfail"` and password `"wrongpass"`.                                                                                                                                                                                           | Error is displayed and login fails.                                                                | Massi       |
| OB-23   | Continuing as guest                                             | None                                                                        | Use the "continue as guest" option from LoginFrame.                                                                                                                                                                                                            | `current_user` is set to `"Guest"` and guest access is restricted.                                  | Massi       |
| OB-24   | Favourites when no favourites are set                           | User `"faveuser"` exists without a favourites list                          | Invoke `favourites()` function.                                                                                                                                                                                                                                  | Error "No favourites yet" is displayed and search results remain empty.                           | Massi       |
| OB-25   | Displaying favourite albums                                     | User `"faveuser"` has favourites list containing `"fav123"` and album list includes both favourite and non-favourite albums | Invoke `favourites()` function.                                                                                                                                                                                                                                  | Only the album with Deezer\_ID `"fav123"` is displayed in search results.                         | Massi       |
| OB-26   | Removing an album from favourites                               | User `"faveuser"` has album with Deezer\_ID `"fav123"` in favourites           | 1. Select the album in CatalogFrame. <br> 2. Invoke `unfavourite_album()`.                                                                                                                                                                                      | Album is removed from favourites and a success message is shown.                                   | Massi       |
| OB-27   | Attempting to remove an album not in favourites                 | User `"faveuser"` exists with an empty favourites list                      | 1. Select a non-favourite album in CatalogFrame. <br> 2. Invoke `unfavourite_album()`.                                                                                                                                                                          | Error is displayed indicating the album is not in favourites.                                     | Massi       |

---

## 3. Bugs Fixed 🐛

During this entire project, we faced a bunch of bugs during development. Below are some of the ones we fixed:

**1. Album Adding/Deletion Causing Tracklist Errors:**

- After adding new columns/attributes (`Tracklist` and `Deezer_ID`) to the csv database, we forgot to add them to our save function (named `save_albums()`). This function is called after every album add and album deletion so it is quite important. As a result, the data was overwritten causing the tracklist to get deleted. To fix this, we just wrote the additional attributes back in the save function.

**2. Edit Album Popup Window Test Failure:**

- While doing our unit tests, the popup windows caused edit album test failures due to them stalling the main thread while the tests kept going ahead. To fix this, we added a `force` boolean argument to the `edit_album()` function. If this boolean is True, then the function will skip these popup windows and just accept the edits. This was okay for some of our unit tests since we were testing as if the user did press the accept popup button anyways.

**3. Favourite/Unfavourite Album Test Failure:**

- The `favourite_album()` and `unfavourite_album()` functions were failing their unit tests because the threading of our album display caused the `selected_album` of the catalog class to not register in time before the testing occured. To fix this, we created a `no_threading` boolean argument to our refresh function which just forces the album to load on the main thread. This is fine in this case since we were just using one album in these two unit tests anyways.

**4. Guest Login Kept Showing Extra Buttons Error:**

- We were designing the UI so that the `Edit Album`, `Add Album`, `Delete Album`, `Favourite Album`, `Unfavourite Album`, and `Edit Account` buttons didn't appear for guests. However, they still showed up even though we used `grid_forget()` to hide them. This was because we called `grid_forget()` in the `__init__()` function (which is only called once at the very start of the executable). So, by moving these `grid_forget()` calls to the `continue_as_guest()` function, it allowed them to actually register.


````markdown

